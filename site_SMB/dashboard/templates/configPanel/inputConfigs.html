{% load static %}
<div id="inputConfigPanel" name="inputConfigs" class="box-configPanel boxShadow" style="display: block">
    <div name="upload" class="box-upperConfigPanel">   <!-- block for file upload -->
        <!-- Upload form. make sure use enctype attribute! -->
        <p style="font-size: 35pt; color: #1fa2ff; font-style: normal">Input</p>
        <form action="{% url 'uploadFile' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p class="lightColorFont">{{ form.non_field_errors }}</p>
            <p class="lightColorFont">{{ form.fileField.label_tag }}<br>{{ form.fileField.help_text }}</p>
            <p><input type="image" src="{% static 'dashboard/choose-file.svg' %}" width="120px" value="Choose" onclick="selectFileToUpload()"/><br>
                <span id="selectedUploadFileName" class="lightColorFont"> Please select a file. </span></p>
            <div id="hiddenFileUploadInputField" style='height: 0px;width:0px; overflow:hidden;'>{{ form.fileField.errors }}{{ form.fileField }}</div>
            <script>
                 $('#hiddenFileUploadInputField').children('input').change(function(e){
                    var fileName = e.target.files[0].name;
                    $('#selectedUploadFileName').html(fileName);
                });
            </script>
            <p><input type="image" src="{% static 'dashboard/upload.svg' %}" width="120px" value="Upload"
             onclick="submitFileForm(this)"/></p>
        </form>
    </div>
    <div id="listFileToolDetails" name="listFiles" class="box-lowerConfigPanel">
           {% include 'configPanel/uploadedFileList.html' %}
    </div>
</div>
<script>
    function selectFileToUpload() {
        var fileFieldDiv = $('#hiddenFileUploadInputField');
        var fileFieldInput = fileFieldDiv.children('input');
        debugger
        fileFieldInput.click();
    }
    function submitFileForm(elem) {
        send$Form($(elem.closest('form')), reloadDivID='listFileToolDetails');
    }
</script>
